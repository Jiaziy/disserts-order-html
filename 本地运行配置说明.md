# ç”œç‚¹è®¾è®¡å¹³å° - æœ¬åœ°è¿è¡Œé…ç½®è¯´æ˜

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®å·²å®Œå…¨æ”¾å¼ƒSupabaseè¿æ¥ï¼Œè½¬ä¸ºçº¯æœ¬åœ°å­˜å‚¨æ–¹æ¡ˆï¼Œç¡®ä¿é¡¹ç›®**ä»…åœ¨æœ¬åœ°å°±å¯ä»¥è¿è¡Œ**ã€‚

## ğŸš€ è¿è¡Œå‰å‡†å¤‡

### ç³»ç»Ÿè¦æ±‚
- ç°ä»£æµè§ˆå™¨ï¼ˆChrome 80+, Firefox 75+, Safari 13+, Edge 80+ï¼‰
- ä¸éœ€è¦å®‰è£…ä»»ä½•æ•°æ®åº“æˆ–æœåŠ¡å™¨è½¯ä»¶
- ä¸éœ€è¦ç½‘ç»œè¿æ¥ï¼ˆçº¯æœ¬åœ°è¿è¡Œï¼‰

### æ–‡ä»¶ç»“æ„
```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ index.html              # ä¸»é¡µé¢
â”œâ”€â”€ sweets-designer.html     # è®¾è®¡å™¨é¡µé¢
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ local-storage-manager.js  # æœ¬åœ°å­˜å‚¨ç®¡ç†å™¨ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ sweets-designer.js        # è®¾è®¡å™¨é€»è¾‘
â”‚   â”œâ”€â”€ sweets-gallery.js         # ç”»å»Šé¡µé¢
â”‚   â””â”€â”€ storage-utils.js         # å­˜å‚¨å·¥å…·ç±»ï¼ˆå…¼å®¹å±‚ï¼‰
â”œâ”€â”€ css/                    # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ node_modules/           # ä¾èµ–åŒ…
â””â”€â”€ æœ¬åœ°è¿è¡Œé…ç½®è¯´æ˜.md      # æœ¬æ–‡æ¡£
```

## ğŸ’¾ å­˜å‚¨æ¶æ„è¯´æ˜

### å­˜å‚¨ä½ç½®
æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨æµè§ˆå™¨çš„**localStorage**ä¸­ï¼Œå®Œå…¨æœ¬åœ°åŒ–ã€‚

### å­˜å‚¨é”®åè§„èŒƒ
é¡¹ç›®ä½¿ç”¨ç»Ÿä¸€çš„å‰ç¼€ `sweets_` æ¥ç®¡ç†æ‰€æœ‰æ•°æ®ï¼š

#### ä¸»è¦å­˜å‚¨é”®
- `sweets_users` - ç”¨æˆ·æ•°æ®åº“
- `sweets_current_user` - å½“å‰ç™»å½•ç”¨æˆ·
- `sweets_designs` - è®¾è®¡æ•°æ®ä¸»å­˜å‚¨
- `sweets_last_design` - æœ€åä¸€æ¬¡è®¾è®¡
- `sweets_last_image` - æœ€åä¸€æ¬¡è®¾è®¡å›¾ç‰‡
- `sweets_orders` - è®¢å•æ•°æ®
- `sweets_app_settings` - åº”ç”¨è®¾ç½®
- `sweets_tutorial` - æ•™ç¨‹çŠ¶æ€

#### å…¼å®¹æ€§é”®å
ç³»ç»Ÿä¼šè‡ªåŠ¨è¿ç§»æ—§æ ¼å¼çš„æ•°æ®åˆ°æ–°æ ¼å¼ï¼š
- `sweetsDesigns` â†’ `sweets_designs`
- `designs` â†’ `sweets_designs`
- `orders` â†’ `sweets_orders`
- `users` â†’ `sweets_users`
- `currentUser` â†’ `sweets_current_user`
- `lastDesignImage` â†’ `sweets_last_design`
- `lastDesignType` â†’ `sweets_last_design`

## ğŸ”§ é…ç½®è¯´æ˜

### æ— éœ€ä»»ä½•é…ç½®
é¡¹ç›®å¼€ç®±å³ç”¨ï¼Œæ— éœ€é…ç½®æ•°æ®åº“è¿æ¥ã€APIå¯†é’¥ç­‰ã€‚

### æ•°æ®æŒä¹…åŒ–
- æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨çš„localStorageä¸­
- æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜ä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®
- æ”¯æŒæ•°æ®å¯¼å‡º/å¯¼å…¥åŠŸèƒ½

## ğŸ¯ å¯åŠ¨æ–¹å¼

### æ–¹å¼ä¸€ï¼šç›´æ¥æ‰“å¼€HTMLæ–‡ä»¶
1. åŒå‡» `index.html` æ–‡ä»¶
2. æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€å¹¶è¿è¡Œåº”ç”¨

### æ–¹å¼äºŒï¼šä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆæ¨èï¼‰
```bash
# ä½¿ç”¨Pythonå†…ç½®æœåŠ¡å™¨
python -m http.server 8000

# æˆ–ä½¿ç”¨Node.jsçš„http-server
npx http-server

# æˆ–ä½¿ç”¨Live Serverï¼ˆVS Codeæ’ä»¶ï¼‰
# åœ¨VS Codeä¸­å³é”®ç‚¹å‡»index.htmlï¼Œé€‰æ‹©"Open with Live Server"
```

ç„¶åè®¿é—®ï¼š`http://localhost:8000`

## ğŸ“Š å­˜å‚¨å†…å®¹è¯¦è§£

### ç”¨æˆ·æ•°æ® (`sweets_users`)
```json
{
  "user@example.com": {
    "id": "user_123456789",
    "email": "user@example.com",
    "password": "hashed_password",
    "name": "ç”¨æˆ·å",
    "createdAt": "2025-11-10T08:00:00.000Z",
    "lastLoginAt": "2025-11-10T10:00:00.000Z"
  }
}
```

### è®¾è®¡æ•°æ® (`sweets_designs`)
```json
[
  {
    "id": "design_123456789",
    "userId": "user_123456789",
    "userName": "ç”¨æˆ·å",
    "name": "æˆ‘çš„è®¾è®¡",
    "description": "è®¾è®¡æè¿°",
    "canvasData": "data:image/png;base64,...",
    "dessertType": "chocolate",
    "elements": "[]",
    "imagePosition": {"x": 0, "y": 0},
    "imageScale": 1,
    "createTime": "2025-11-10T08:00:00.000Z",
    "status": "saved"
  }
]
```

### è®¢å•æ•°æ® (`sweets_orders`)
```json
[
  {
    "id": "order_123456789",
    "userId": "user_123456789",
    "productType": "å·§å…‹åŠ›",
    "selectedStyle": "åœ†å½¢",
    "flavorIndex": 0,
    "customText": "ä¸ªæ€§åŒ–æ–‡å­—",
    "quantity": 1,
    "selectedPackaging": "ç²¾ç¾åŒ…è£…",
    "designImage": "data:image/png;base64,...",
    "totalPrice": 128.00,
    "customerInfo": {"name": "å®¢æˆ·", "phone": "138****1234"},
    "status": "pending",
    "createTime": "2025-11-10T08:00:00.000Z"
  }
]
```

## ğŸ”„ æ•°æ®ç®¡ç†

### æŸ¥çœ‹å­˜å‚¨çŠ¶æ€
åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¿è¡Œï¼š
```javascript
// æŸ¥çœ‹å­˜å‚¨ç»Ÿè®¡
console.log('å­˜å‚¨ç»Ÿè®¡:', window.StorageManager.getStorageStats());

// æŸ¥çœ‹æ‰€æœ‰æ•°æ®
console.log('è®¾è®¡æ•°æ®:', window.StorageManager.getDesigns());
console.log('è®¢å•æ•°æ®:', window.StorageManager.getOrders());
console.log('ç”¨æˆ·æ•°æ®:', window.StorageManager.getUsers());
```

### å¯¼å‡ºæ•°æ®
```javascript
const exportData = window.StorageManager.exportData();
console.log('å¯¼å‡ºæ•°æ®:', exportData);
// å¯ä»¥ä¿å­˜åˆ°æ–‡ä»¶
```

### æ¸…é™¤æ‰€æœ‰æ•°æ®
```javascript
// æ¸…é™¤æ‰€æœ‰åº”ç”¨æ•°æ®
window.StorageManager.clearAllData();
console.log('æ‰€æœ‰æ•°æ®å·²æ¸…é™¤');
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. é¡µé¢æ— æ³•åŠ è½½
- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒlocalStorage
- å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

#### 2. æ•°æ®ä¸æ˜¾ç¤º
- æ£€æŸ¥æ˜¯å¦åœ¨ç§å¯†æµè§ˆæ¨¡å¼ä¸‹ï¼ˆæŸäº›æµè§ˆå™¨é™åˆ¶localStorageï¼‰
- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦ç¦ç”¨äº†localStorage

#### 3. å­˜å‚¨ç©ºé—´ä¸è¶³
- localStorageæœ‰å¤§å°é™åˆ¶ï¼ˆé€šå¸¸5-10MBï¼‰
- å®šæœŸæ¸…ç†ä¸å¿…è¦çš„æ•°æ®

### è°ƒè¯•æŠ€å·§
```javascript
// æ£€æŸ¥å­˜å‚¨ç®¡ç†å™¨æ˜¯å¦æ­£å¸¸åŠ è½½
console.log('å­˜å‚¨ç®¡ç†å™¨:', window.StorageManager);

// æ£€æŸ¥å­˜å‚¨é”®
for (let i = 0; i < localStorage.length; i++) {
  const key = localStorage.key(i);
  console.log(`é”®å: ${key}, å¤§å°: ${localStorage.getItem(key).length} å­—èŠ‚`);
}
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å­˜å‚¨ä¼˜åŒ–å»ºè®®
1. **å®šæœŸæ¸…ç†**ï¼šåˆ é™¤ä¸å¿…è¦çš„å†å²æ•°æ®
2. **æ•°æ®å‹ç¼©**ï¼šå¯¹å¤§å‹å›¾ç‰‡æ•°æ®è¿›è¡Œå‹ç¼©
3. **åˆ†æ‰¹ä¿å­˜**ï¼šé¿å…ä¸€æ¬¡æ€§ä¿å­˜å¤§é‡æ•°æ®

### å†…å­˜ç®¡ç†
- è®¾è®¡å›¾ç‰‡æ•°æ®å¯èƒ½å ç”¨è¾ƒå¤§ç©ºé—´
- å»ºè®®ä½¿ç”¨ä¸­ç­‰è´¨é‡çš„å›¾ç‰‡å¯¼å‡º
- å®šæœŸå¯¼å‡ºé‡è¦æ•°æ®å¤‡ä»½

## ğŸ”’ å®‰å…¨è¯´æ˜

### æ•°æ®å®‰å…¨
- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°æµè§ˆå™¨ä¸­
- æ²¡æœ‰æœåŠ¡å™¨ä¼ è¾“ï¼Œé¿å…æ•°æ®æ³„éœ²é£é™©
- ç”¨æˆ·éœ€è¦è‡ªè¡Œå¤‡ä»½é‡è¦æ•°æ®

### éšç§ä¿æŠ¤
- æ— éœ€æ³¨å†Œä¸ªäººæ•æ„Ÿä¿¡æ¯
- æ”¯æŒåŒ¿åä½¿ç”¨
- æ¸…ç©ºæµè§ˆå™¨å³å¯å®Œå…¨åˆ é™¤æ•°æ®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
2. æµè§ˆå™¨æ˜¯å¦æ”¯æŒlocalStorage
3. æ˜¯å¦å¯ç”¨äº†JavaScript

æœ¬é¡¹ç›®å®Œå…¨æœ¬åœ°åŒ–ï¼Œæ— éœ€ç½‘ç»œè¿æ¥ï¼Œç¡®ä¿åœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½èƒ½ç¨³å®šè¿è¡Œï¼