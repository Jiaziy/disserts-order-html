<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>巧克力定制平台 - 主页</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/sweets-gallery.css">
    <style>
        /* 确保样式正确加载的临时修复 */
        .designs-grid, .content-grid {
            display: block !important;
        }
        .design-card, .order-card {
            display: flex !important;
            align-items: center !important;
            padding: 16px !important;
            background: white !important;
            border-radius: 12px !important;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08) !important;
            margin-bottom: 12px !important;
        }
        .design-image, .order-image {
            width: 80px !important;
            height: 80px !important;
            background: #f8f9fa !important;
            border-radius: 8px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            margin-right: 20px !important;
        }
        .design-info, .order-info {
            flex: 1 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
        }
        .design-title, .order-title {
            font-size: 16px !important;
            font-weight: 600 !important;
            color: #333 !important;
            min-width: 200px !important;
        }
        .design-meta, .order-meta {
            display: flex !important;
            gap: 20px !important;
            align-items: center !important;
        }
        .design-actions, .order-actions {
            display: flex !important;
            gap: 10px !important;
        }
        .design-actions button, .order-actions button {
            padding: 6px 12px !important;
            border: none !important;
            border-radius: 6px !important;
            font-size: 12px !important;
            cursor: pointer !important;
        }
        .primary {
            background: #FF6B95 !important;
            color: white !important;
        }
        .secondary {
            background: #6c757d !important;
            color: white !important;
        }
        .danger {
            background: #dc3545 !important;
            color: white !important;
        }
        
        /* 确保模态框样式正确 */
        .modal {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: rgba(0, 0, 0, 0.5) !important;
            display: none !important;
            align-items: center !important;
            justify-content: center !important;
            z-index: 1000 !important;
        }
        .modal.show {
            display: flex !important;
        }
        .modal-content {
            background: white !important;
            border-radius: 20px !important;
            max-width: 600px !important;
            width: 90% !important;
            max-height: 80vh !important;
            overflow-y: auto !important;
            position: relative !important;
        }
    </style>
    <link rel="stylesheet" href="css/sweets-gallery.css">
    <style>
        /* 确保样式正确加载的临时修复 */
        .designs-grid, .content-grid {
            display: block !important;
        }
        .design-card, .order-card {
            display: flex !important;
            align-items: center !important;
            padding: 16px !important;
            background: white !important;
            border-radius: 12px !important;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08) !important;
            margin-bottom: 12px !important;
        }
        .design-image, .order-image {
            width: 80px !important;
            height: 80px !important;
            background: #f8f9fa !important;
            border-radius: 8px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            margin-right: 20px !important;
        }
        .design-info, .order-info {
            flex: 1 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
        }
        .design-title, .order-title {
            font-size: 16px !important;
            font-weight: 600 !important;
            color: #333 !important;
            min-width: 200px !important;
        }
        .design-meta, .order-meta {
            display: flex !important;
            gap: 20px !important;
            align-items: center !important;
        }
        .design-actions, .order-actions {
            display: flex !important;
            gap: 10px !important;
        }
        .design-actions button, .order-actions button {
            padding: 6px 12px !important;
            border: none !important;
            border-radius: 6px !important;
            font-size: 12px !important;
            cursor: pointer !important;
        }
        .primary {
            background: #FF6B95 !important;
            color: white !important;
        }
        .secondary {
            background: #6c757d !important;
            color: white !important;
        }
        .danger {
            background: #dc3545 !important;
            color: white !important;
        }
        
        /* 确保模态框样式正确 */
        .modal {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: rgba(0, 0, 0, 0.5) !important;
            display: none !important;
            align-items: center !important;
            justify-content: center !important;
            z-index: 1000 !important;
        }
        .modal.show {
            display: flex !important;
        }
        .modal-content {
            background: white !important;
            border-radius: 20px !important;
            max-width: 600px !important;
            width: 90% !important;
            max-height: 80vh !important;
            overflow-y: auto !important;
            position: relative !important;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="top-navbar">
        <div class="nav-brand">
            <i class="fas fa-candy-cane"></i>
            <h1>巧克力定制平台</h1>
        </div>
        
        <div class="nav-menu">
            <div class="nav-item active" data-page="home">首页</div>
            <div class="nav-item" data-page="customize">定制中心</div>
            <div class="nav-item" data-page="designs">我的设计</div>
            <div class="nav-item" data-page="profile">个人中心</div>
        </div>
        
        <div class="user-info">
            <div class="user-avatar">
                <i class="fas fa-user"></i>
            </div>
            <span id="user-name">用户</span>
            <button class="logout-btn" onclick="logout()">退出</button>
        </div>
    </nav>

    <!-- 侧边栏 -->
    <aside class="sidebar">
        <ul class="sidebar-menu">
            <li class="sidebar-item active" data-page="home">
                <i class="fas fa-home"></i>
                <span>首页</span>
            </li>
            <li class="sidebar-item" data-page="customize">
                <i class="fas fa-palette"></i>
                <span>定制中心</span>
            </li>
            <li class="sidebar-item" data-page="designs">
                <i class="fas fa-drafting-compass"></i>
                <span>我的设计</span>
            </li>
            <li class="sidebar-item" data-page="profile">
                <i class="fas fa-user"></i>
                <span>个人中心</span>
            </li>
            <li class="sidebar-item" data-page="settings">
                <i class="fas fa-cog"></i>
                <span>设置</span>
            </li>
            <li class="sidebar-item" data-page="help">
                <i class="fas fa-question-circle"></i>
                <span>帮助中心</span>
            </li>
        </ul>
    </aside>

    <!-- 主内容区域 -->
    <main class="main-content">
        <!-- 首页 -->
        <div id="home-page" class="page-content active">
            <div class="banner">
                <h2>个性化巧克力定制</h2>
                <p>打造属于您的专属甜蜜体验，从口味到包装，完全由您定制</p>
                <button class="start-btn" data-navigate="customize.html?type=chocolate">开始定制</button>
            </div>
            
            <div class="product-list">
                <h3>产品分类</h3>
                <div class="products">
                    <div class="product-item" data-navigate="customize.html?type=chocolate">
                        <i class="fas fa-cookie-bite"></i>
                        <span>巧克力定制</span>
                    </div>
                    <div class="product-item" data-navigate="customize.html?type=cake">
                        <i class="fas fa-birthday-cake"></i>
                        <span>蛋糕定制</span>
                    </div>
                    <div class="product-item" data-navigate="customize.html?type=gift">
                        <i class="fas fa-gift"></i>
                        <span>礼品套装</span>
                    </div>
                    <div class="product-item" data-navigate="customize.html?type=special">
                        <i class="fas fa-star"></i>
                        <span>特色定制</span>
                    </div>
                </div>
            </div>
            
            <div class="product-list">
                <h3>热门推荐</h3>
                <div class="products">
                    <div class="product-item">
                        <i class="fas fa-heart"></i>
                        <span>情人节定制</span>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-birthday-cake"></i>
                        <span>生日定制</span>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-graduation-cap"></i>
                        <span>毕业纪念</span>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-baby"></i>
                        <span>宝宝定制</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 定制页面 -->
        <div id="customize-page" class="page-content">
            <div class="customize-container">
                <h2>个性化定制中心</h2>
                <p>选择您想要定制的产品类型，开始您的创意之旅</p>
                <div class="products" style="margin-top: 30px;">
                    <div class="product-item" data-navigate="customize.html?type=chocolate">
                        <i class="fas fa-cookie-bite"></i>
                        <span>巧克力定制</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 我的设计页面 -->
        <div id="designs-page" class="page-content">
            <div class="gallery-container">
                <!-- 标签页切换 -->
                <div class="tab-container">
                    <!-- <button class="tab-btn active" data-tab="designs">
                        <i class="fas fa-palette"></i>
                        我的设计
                    </button> -->
                    <button class="tab-btn" data-tab="orders">
                        <i class="fas fa-shopping-cart"></i>
                        我的订单
                    </button>
                </div>

                <!-- 筛选和搜索 -->
                <div class="gallery-header">
                    <h2>我的设计作品</h2>
                    <div class="filter-controls">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="search-input" placeholder="搜索...">
                        </div>
                        
                        <select id="type-filter">
                            <option value="all">所有类型</option>
                            <option value="chocolate">巧克力</option>
                        </select>
                        
                        <select id="sort-filter">
                            <option value="newest">最新创建</option>
                            <option value="oldest">最早创建</option>
                            <option value="name">按名称</option>
                        </select>
                        
                        <button class="refresh-btn" onclick="refreshData()">
                            <i class="fas fa-sync-alt"></i>
                            刷新
                        </button>
                    </div>
                </div>

                <!-- 内容网格 -->
                <div class="content-grid" id="content-grid">
                    <!-- 设计网格 -->
                    <div id="designs-grid" class="designs-grid">
                        <!-- 设计内容将动态加载 -->
                    </div>
                    
                    <!-- 空状态 -->
                    <div class="empty-state" id="empty-state">
                        <i class="fas fa-palette"></i>
                        <h3>还没有设计作品</h3>
                        <p>开始您的第一个甜点设计吧！</p>
                        <button class="primary-btn" data-navigate="sweets-designer.html">
                            开始设计
                        </button>
                    </div>
                </div>

                <!-- 作品详情模态框 -->
                <div class="modal" id="design-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="modal-title">设计详情</h3>
                            <button class="close-btn" onclick="closeModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="modal-body">
                            <div class="design-preview">
                                <img id="modal-image" src="" alt="设计预览">
                            </div>
                            
                            <div class="design-info">
                                <div class="info-section">
                                    <h4>设计信息</h4>
                                    <div class="info-grid">
                                        <div class="info-item">
                                            <span>名称:</span>
                                            <span id="info-name"></span>
                                        </div>
                                        <div class="info-item">
                                            <span>类型:</span>
                                            <span id="info-type"></span>
                                        </div>
                                        <div class="info-item">
                                            <span>形状:</span>
                                            <span id="info-shape"></span>
                                        </div>
                                        <div class="info-item">
                                            <span>创建时间:</span>
                                            <span id="info-date"></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn secondary" onclick="editDesign()">
                                        <i class="fas fa-edit"></i>编辑
                                    </button>
                                    <button class="btn primary" onclick="exportDesign()">
                                        <i class="fas fa-download"></i>导出
                                    </button>
                                    <button class="btn success" onclick="useDesign()">
                                        <i class="fas fa-shopping-cart"></i>使用
                                    </button>
                                    <button class="btn danger" onclick="deleteDesign()">
                                        <i class="fas fa-trash"></i>删除
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 订单详情模态框 -->
                <div class="modal" id="order-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="order-modal-title">订单详情</h3>
                            <button class="close-btn" onclick="closeOrderModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="modal-body">
                            <div class="order-details">
                                <div class="info-section">
                                    <h4>订单信息</h4>
                                    <div class="info-grid">
                                        <div class="info-item">
                                            <span>产品类型:</span>
                                            <span id="order-product-type"></span>
                                        </div>
                                        <div class="info-item">
                                            <span>样式:</span>
                                            <span id="order-style"></span>
                                        </div>
                                        <div class="info-item">
                                            <span>数量:</span>
                                            <span id="order-quantity"></span>
                                        </div>
                                        <div class="info-item">
                                            <span>总价:</span>
                                            <span id="order-total-price"></span>
                                        </div>
                                        <div class="info-item">
                                            <span>状态:</span>
                                            <span id="order-status"></span>
                                        </div>
                                        <div class="info-item">
                                            <span>创建时间:</span>
                                            <span id="order-create-time"></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn danger" onclick="deleteOrder()">
                                        <i class="fas fa-trash"></i>删除订单
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 个人中心页面 -->
        <div id="profile-page" class="page-content">
            <div class="profile-container">
                <h2>个人中心</h2>
                <div class="profile-info">
                    <div class="info-item">
                        <span>用户名：</span>
                        <span id="profile-name">-</span>
                    </div>
                    <div class="info-item">
                        <span>手机号：</span>
                        <span id="profile-phone">-</span>
                    </div>
                    <div class="info-item">
                        <span>邮箱：</span>
                        <span id="profile-email">-</span>
                    </div>
                    <div class="info-item">
                        <span>会员等级：</span>
                        <span>普通会员</span>
                    </div>
                    <div class="info-item">
                        <span>注册时间：</span>
                        <span>2024-01-01</span>
                    </div>
                </div>
            </div>
        </div>







        <!-- 使用教程页面 -->
        <div id="sweets-tutorial-page" class="page-content">
            <div class="sweets-tutorial-container">
                <h2>甜点设计使用教程</h2>
                <p>学习如何使用甜点DIY设计平台</p>
                <div class="tutorial-preview">
                    <div class="tutorial-card">
                        <i class="fas fa-play-circle"></i>
                        <h3>平台介绍</h3>
                        <p>了解平台功能和特色</p>
                    </div>
                    <div class="tutorial-card">
                        <i class="fas fa-rocket"></i>
                        <h3>快速开始</h3>
                        <p>新手入门指南</p>
                    </div>
                    <div class="tutorial-card">
                        <i class="fas fa-paint-brush"></i>
                        <h3>工具使用</h3>
                        <p>各种设计工具说明</p>
                    </div>
                    <div class="tutorial-actions">
                        <button class="primary-btn" data-navigate="sweets-tutorial.html">
                            <i class="fas fa-graduation-cap"></i> 查看完整教程
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 引入本地存储管理器 -->
    <script src="js/local-storage-manager.js"></script>
    <script src="js/navigation-manager.js"></script>
    <script src="js/sweets-gallery.js"></script>
    <script src="js/app-new.js"></script>
    
    <!-- 页面加载完成后初始化gallery -->
    <script>
        // 确保页面完全加载后初始化gallery
        window.addEventListener('load', function() {
            // 检查是否在"我的设计"页面
            const designsPage = document.getElementById('designs-page');
            if (designsPage && designsPage.classList.contains('active')) {
                console.log('检测到"我的设计"页面，初始化gallery...');
                
                // 延迟初始化，确保所有DOM元素都已加载
                setTimeout(() => {
                    if (typeof initializeGallery === 'function') {
                        initializeGallery();
                        console.log('Gallery初始化完成');
                    }
                }, 500);
            }
        });
    </script>
</body>
</html>